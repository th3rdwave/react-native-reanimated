{"version":3,"names":["useAnimatedRef","tag","useSharedValue","ref","useRef","isFabric","global","_IS_FABRIC","current","fun","component","value","getShadowNodeWrapperFromHostInstance","getTag","Object","defineProperty","writable","enumerable"],"sources":["useAnimatedRef.ts"],"sourcesContent":["import { Component, useRef } from 'react';\nimport { useSharedValue } from './useSharedValue';\nimport { RefObjectFunction } from './commonTypes';\nimport { ShadowNodeWrapper } from '../commonTypes';\nimport { getTag } from '../NativeMethods';\nimport { getShadowNodeWrapperFromHostInstance } from '../fabricUtils';\n\nexport function useAnimatedRef<T extends Component>(): RefObjectFunction<T> {\n  const tag = useSharedValue<number | ShadowNodeWrapper | null>(-1);\n  const ref = useRef<RefObjectFunction<T>>();\n  const isFabric = global._IS_FABRIC;\n\n  if (!ref.current) {\n    const fun: RefObjectFunction<T> = <RefObjectFunction<T>>((component) => {\n      'worklet';\n      // enters when ref is set by attaching to a component\n      if (component) {\n        tag.value = isFabric\n          ? getShadowNodeWrapperFromHostInstance(component)\n          : getTag(component);\n        fun.current = component;\n      }\n      return tag.value;\n    });\n\n    Object.defineProperty(fun, 'current', {\n      value: null,\n      writable: true,\n      enumerable: false,\n    });\n    ref.current = fun;\n  }\n\n  return ref.current;\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AAGA;;AACA;;AAEO,SAASA,cAAT,GAAqE;EAC1E,MAAMC,GAAG,GAAG,IAAAC,8BAAA,EAAkD,CAAC,CAAnD,CAAZ;EACA,MAAMC,GAAG,GAAG,IAAAC,aAAA,GAAZ;EACA,MAAMC,QAAQ,GAAGC,MAAM,CAACC,UAAxB;;EAEA,IAAI,CAACJ,GAAG,CAACK,OAAT,EAAkB;IAChB,MAAMC,GAAyB,GAA2BC,SAAD,IAAe;MACtE,UADsE,CAEtE;;MACA,IAAIA,SAAJ,EAAe;QACbT,GAAG,CAACU,KAAJ,GAAYN,QAAQ,GAChB,IAAAO,iDAAA,EAAqCF,SAArC,CADgB,GAEhB,IAAAG,qBAAA,EAAOH,SAAP,CAFJ;QAGAD,GAAG,CAACD,OAAJ,GAAcE,SAAd;MACD;;MACD,OAAOT,GAAG,CAACU,KAAX;IACD,CAVD;;IAYAG,MAAM,CAACC,cAAP,CAAsBN,GAAtB,EAA2B,SAA3B,EAAsC;MACpCE,KAAK,EAAE,IAD6B;MAEpCK,QAAQ,EAAE,IAF0B;MAGpCC,UAAU,EAAE;IAHwB,CAAtC;IAKAd,GAAG,CAACK,OAAJ,GAAcC,GAAd;EACD;;EAED,OAAON,GAAG,CAACK,OAAX;AACD"}